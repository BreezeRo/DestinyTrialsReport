<div class="player shadow-z-1"
     ng-class="player.isEditing ? 'is-editing' : 'not-editing'"
     ng-if="fireteam[0].name && $index < 3">
  <ng-include src="infoPartial"></ng-include>

  <tabset class="player-tabs">
    <tab heading="Equipped" analytics-on analytics-event="Click" analytics-category="Equipped">
      <ng-include src="'views/fireteam/weapons.html'"></ng-include>
      <ng-include src="'views/fireteam/gear.html'"></ng-include>
    </tab>
    <tab heading="Last Match" analytics-on analytics-event="Click" analytics-category="Last Match">
      <ng-include src="'views/fireteam/history.html'"></ng-include>
    </tab>
    <tab heading="Stats" analytics-on analytics-event="Click" analytics-category="Stats">
      <ng-include src="'views/fireteam/addStats.html'"></ng-include>
    </tab>
  </tabset>

  <div class="player__links">
    <div class="row">
      <div class="col-xs-12 player__links__btns">
        <a href="http://my.destinytrialsreport.com/{{player.membershipType === 2 ? 'ps' : 'xbox'}}/{{player.name}}"
           type="button" target="_blank"
           class="btn btn-default"
           analytics-on analytics-event="Click" analytics-category="myDestinyTrialsReport"
           data-intro="Links to <strong>myDestinyTrialsReport</strong> for summary of player's guardians"
           data-position="left"
           chardin-show="{{isHelpOverlayElement(fireteam.length, $index)}}">
          myTrialsReport
        </a>
        <a href="http://destinytracker.com/destiny/playlists/{{player.membershipType === 2 ? 'ps' : 'xbox'}}/{{player.name}}/trialsOfOsiris"
           type="button" target="_blank"
           class="btn btn-default"
           analytics-on analytics-event="Click" analytics-category="DestinyTracker"
           data-intro="Links to <strong>DestinyTracker</strong> for more detailed statistics based on all characters and maps"
           data-position="right"
           chardin-show="{{isHelpOverlayElement(fireteam.length, $index)}}">
          DestinyTracker
        </a>
      </div>
    </div>
  </div>

  <div class="edit-player">
    <div ng-if="fireteam[0].name && $index < 3 && $index > -1">
      <div class="edit-player__input">
        <form role="form" ng-submit="searchPlayerbyName(teammateName, platformValue, $index, false)">
          <button class="btn btn-icon" type="submit"
                  ng-class="helpOverlay && ($index === 2) ? 'z99999999' : 'z000000'"
                  data-intro="Clicking 'Suggest Other' will provide a list of players recently played with. If all else fails, you can type a player's name in the text box"
                  data-position="right" chardin-show="{{$index === 2}}">
            <i class="material-icons">send</i>
          </button>
          <input type="text" placeholder="{{fireteam[$index].name}}" class="form-control" ng-model="teammateName"
                 ng-class="helpOverlay && ($index === 2) ? 'z99999999' : 'z000000'" />
        </form>
      </div>
      <div class="edit-player__actions">
        <div class="recent-players">
          <div class="input-group-btn"><!-- class should be "btn-group" but: display issues -->
            <button class="btn btn-white dropdown-toggle btn-raised" type="button"
                    id="playerSelect{{$index}}" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
             Recent Players
             <span class="caret"></span>
           </button>
           <ul class="dropdown-menu" aria-labelledby="playerSelect{{$index}}">
             <li ng-repeat="player in recentPlayers track by $index">
               <a class="black-font" ng-bind="player.name" ng-click="setRecentPlayer(player, ($parent.$index))"
                  analytics-on analytics-event="Click" analytics-category="Recent From Dropdown">
               </a>
             </li>
           </ul>
         </div>
       </div>
       <div class="close-overlay">
         <button class="btn btn-raised btn-white btn-xs" ng-click="toggleEdit(player)">Close</button>
       </div>
    </div>
  </div>
</div>
