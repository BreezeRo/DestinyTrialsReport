<ng-include src="headerPartial"></ng-include>

<div class="container" ng-hide="status">
  <div class="row">
    <div ng-if="fireteam[0].isDeej" id="alertsPlaceholder">
      <alert type="warning" close="closeAlert($index)" class="closeable text-center">
        Sorry about any issues in the past hour, we've been trying to push an update with new features/fixes and ran into...complications.
        <br/>
        Everything should be good now and you might experience slower load times for a short period.
        <br/>
        If you're still having issues try refreshing the browser with cmd+shift+r or open the site in incognito mode
        <br/>
        If you encounter a bug please let us know on our github or message me on reddit, username: FartSausage
      </alert>
    </div>
    <div help-overlay="helpOverlay" class="col-xs-12 col-md-4 {{player.isDeej ? 'col-md-offset-4' : ''}}" ng-if="fireteam[0].name" ng-repeat="player in fireteam track by $index">
      <div class="row ml-0 mr-0" ng-show="$index === 0">
        <div class="btn-group btn-group-justified">
          <div class="btn-group">
            <button class="btn btn-success" type="button"
                    ng-click="refreshInventory()"
                    analytics-on analytics-event="Click"
                    analytics-category="Refresh Inventory"
                    data-intro="Refreshes inventory for all players<br/><em>(weapons, armor, class)</em>"
                    data-position="left">
                    Refresh Inventory
            </button>
          </div>
          <div class="btn-group">
            <button ng-hide="player.isDeej" class="btn btn-default" type="button"
                    ng-click="suggestRecentPlayers()"
                    analytics-on analytics-event="Click"
                    analytics-category="Suggest Recent Players">
                    Suggest <span class="hidden-xs hidden-md">Recent </span>Players
            </button>
            <button ng-show="player.isDeej" class="btn btn-default" type="button"
                    popover="This button populates suggested fireteam members based on past trials history. Best for use in case our generated fireteam doesnt
                             match up with the game, there is no way to look at current fireteams so we are pulling data from the previous played game."
                    popover-placement="bottom"
                    analytics-on analytics-event="Click"
                    analytics-category="(Tutorial) Suggest Recent">
                    Suggest <span class="hidden-xs hidden-md">Recent </span>Players
            </button>

          </div>
        </div>
      </div>
      <div class="row" ng-hide="$index === 0">
        <div class="col-xs-12">
          <form class="form-horizontal" role="form" ng-submit="searchPlayerbyName(teammateName, platformValue, $index, true)">
            <div class="input-group">
              <div ng-show="recentPlayers" class="input-group-btn">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuMobile{{($index)}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  Recent Players
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuMobile{{$index}}">
                  <li ng-repeat="player in recentPlayers track by $index">
                    <a ng-bind="player.name" ng-click="setRecentPlayer(player, ($parent.$index))"
                       analytics-on analytics-event="Click" analytics-category="Recent From Dropdown">
                    </a>
                  </li>
                </ul>
              </div>
              <input type="text" class="form-control" placeholder="Search for..." ng-model="teammateName">
              <span class="input-group-btn">
                <button class="btn btn-default" type="submit">Search</button>
              </span>
            </div>
          </form>
        </div>
      </div>

      <div class="row" style="height:18px">
        <div class="col-xs-12">
          <span class="label bg-danger"
                style="margin-right:2px"
                ng-repeat="hazard in player.weapons.hazards.concat(player.armors.hazards, player.classNodes.hazards) track by $index"
                ng-bind="hazard"
                popover="{{DestinyHazardDefinition[hazard]}}"
                popover-trigger="mouseenter">
          </span>
        </div>
      </div>
      <section class="tile tile-simple">
        <div class="tile-body p-0">
          <ng-include src="'views/fireteam/player.html'"></ng-include>
        </div>
      </section>
    </div>
  </div>

</div>

<ng-include src="'views/shared/footer.html'"></ng-include>
