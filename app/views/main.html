<ng-include src="headerPartial"></ng-include>

<div class="container" ng-hide="status">
  <div class="row">
    <div class="col-xs-12 col-md-4" ng-if="fireteam[0].name" ng-repeat="player in fireteam track by $index">
      <div class="row ml-0 mr-0" ng-show="$index === 0">
        <div class="btn-group btn-group-justified">
          <div class="btn-group">
            <button class="btn btn-success" type="button"
                    ng-click="refreshInventory()"
                    analytics-on analytics-event="Click"
                    analytics-category="Refresh Inventory">
                    Refresh Inventory
            </button>
          </div>
          <div class="btn-group">
            <button class="btn btn-default" type="button"
                    ng-click="suggestRecentPlayers()"
                    analytics-on analytics-event="Click"
                    analytics-category="Suggest Recent Players">
                    Suggest Recent<span class="hidden-md"> Players</span>
            </button>
          </div>
        </div>
      </div>
      <div class="row" ng-hide="$index === 0">
        <div class="col-xs-12">
          <form class="form-horizontal" role="form" ng-submit="searchPlayerbyName(teammateName, platformValue, $index)">
            <div class="input-group">
              <div ng-show="recentPlayers" class="input-group-btn">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuMobile{{($index)}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                  Recent Players
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuMobile{{$index}}">
                  <li ng-repeat="player in recentPlayers track by $index">
                    <a ng-bind="player.name" ng-click="setRecentPlayer(player, ($parent.$index))"
                       analytics-on analytics-event="Click" analytics-category="Recent From Dropdown">
                    </a>
                  </li>
                </ul>
              </div>
              <input type="text" class="form-control" placeholder="Search for..." ng-model="teammateName">
              <span class="input-group-btn">
                <button class="btn btn-default" type="submit">Search</button>
              </span>
            </div>
          </form>
        </div>
      </div>

      <div class="row" style="height:18px">
        <div class="col-xs-12">
          <span class="label bg-danger"
                style="margin-right:2px"
                ng-repeat="hazard in player.weapons.hazards.concat(player.armors.hazards, player.classNodes.hazards) track by $index"
                ng-bind="hazard"
                popover="{{DestinyHazardDefinition[hazard]}}"
                popover-trigger="mouseenter"
                popover-placement="top">
          </span>
        </div>
      </div>

      <section class="tile tile-simple">
        <div class="tile-body p-0">
          <ng-include src="'views/fireteam/player.html'"></ng-include>
        </div>
      </section>
    </div>

    <div ng-if="!fireteam[0].name" help-overlay="helpOverlay" class="col-xs-12 col-md-4 col-md-offset-4 hidden-xs hidden-sm" ng-repeat="player in [dummyFireteam] track by $index">
      <div class="row">
        <div ng-show="$index === 0" class="col-xs-12"
             popover="This button populates suggested fireteam members based on past trials history. Best for use in case our generated fireteam doesnt
             match up with the game, there is no way to look at current fireteams so we are pulling data from the previous played game."
             popover-placement="bottom">
          <button class="btn btn-block btn-default" type="button">Suggest Recent Players</button>
        </div>
      </div>

      <div class="row" style="height:18px">
        <div class="col-xs-12 p-0 ml-15" data-intro="Useful hazards about the player" data-position="left" data-class="red">
          <span class="label bg-danger"
                style="margin-right:2px"
                ng-repeat="hazard in player.weapons.hazards.concat(player.armors.hazards, player.classNodes.hazards) track by $index"
                ng-bind="hazard"
                popover="{{DestinyHazardDefinition[hazard]}}"
                popover-trigger="mouseenter"
                popover-placement="top">
          </span>
        </div>
      </div>

      <section class="tile tile-simple">
        <div class="tile-body p-0">
          <ng-include src="playerPartial"></ng-include>
        </div>
      </section>
    </div>
  </div>

</div>

<ng-include src="'views/shared/footer.html'"></ng-include>
